{"version":3,"file":"index.esm.js","sources":["../src/index.js"],"sourcesContent":["import { API_FAILURE } from '@sigfox/redux-api-middleware';\nimport isSubset from 'is-subset';\n\nexport const API_MAINTENANCE = '@@redux-api-maintenance-middleware/API_MAINTENANCE';\n\nexport default function reduxApiMaintenanceMiddleware(\n  options = { status: 503, error: { error: 'maintenance' } }\n) {\n  return ({ dispatch }) => next => (action) => {\n    if (\n      action.parentType === API_FAILURE\n      && action.status === options.status\n      && isSubset(action.error, options.error)\n    ) {\n      dispatch({\n        type: API_MAINTENANCE,\n        status: action.status,\n        error: action.error,\n        headers: action.headers\n      });\n\n      return next({ ...action, maintenance: true });\n    }\n    next(action);\n  };\n}\n"],"names":["API_MAINTENANCE","reduxApiMaintenanceMiddleware","options","status","error","dispatch","next","action","parentType","API_FAILURE","isSubset","type","headers","maintenance"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAGaA,eAAe,GAAG,oDAAxB;AAEP,AAAe,SAASC,6BAAT,GAEb;MADAC,OACA,uEADU;IAAEC,MAAM,EAAE,GAAV;IAAeC,KAAK,EAAE;MAAEA,KAAK,EAAE;;GACzC;SACO;QAAGC,QAAH,QAAGA,QAAH;WAAkB,UAAAC,IAAI;aAAI,UAACC,MAAD,EAAY;YAEzCA,MAAM,CAACC,UAAP,KAAsBC,WAAtB,IACGF,MAAM,CAACJ,MAAP,KAAkBD,OAAO,CAACC,MAD7B,IAEGO,QAAQ,CAACH,MAAM,CAACH,KAAR,EAAeF,OAAO,CAACE,KAAvB,CAHb,EAIE;UACAC,QAAQ,CAAC;YACPM,IAAI,EAAEX,eADC;YAEPG,MAAM,EAAEI,MAAM,CAACJ,MAFR;YAGPC,KAAK,EAAEG,MAAM,CAACH,KAHP;YAIPQ,OAAO,EAAEL,MAAM,CAACK;WAJV,CAAR;iBAOON,IAAI,mBAAMC,MAAN;YAAcM,WAAW,EAAE;aAAtC;;;QAEFP,IAAI,CAACC,MAAD,CAAJ;OAf2B;KAAtB;GAAP;;;;;;"}